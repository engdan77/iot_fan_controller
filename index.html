<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Fan Control</title>
    <style>
      body {
        font-family: sans-serif;
        background: #3498db;
        width: 100%;
        text-align: center;
        margin: 20px 0px 20px 0px;
      }
      p {
        font-size: 12px;
        text-decoration: none;
        color: #fff;
      }
      h1 {
        font-size: 1.5em;
        color: #525252;
      }
      .box {
        background: white;
        width: 40ch;
        border-radius: 6px;
        margin: 0 auto 0 auto;
        padding: 10px 0px 10px 0px;
      }
      input[type='text'],
      input[type='password'],
      input[type='mqtt_broker'],
      input[type='mqtt_user'],
      input[type='mqtt_password'],
      input[type='temp_threshold'] {
        background: #ecf0f1;
        border: #ccc 1px solid;
        border-bottom: #ccc 2px solid;
        padding: 8px;
        width: 80%;
        color: #aaa;
        margin-top: 10px;
        font-size: 1em;
        border-radius: 4px;
      }
      .btn {
        background: #2ecc71;
        width: 50%;
        padding-top: 5px;
        padding-bottom: 5px;
        color: white;
        border-radius: 4px;
        border: #27ae60 1px solid;
        margin: 20 auto;
        font-weight: 800;
        font-size: 0.8em;
      }
      .btn_on {
        background: lightgreen;
        width: 30%;
        padding-top: 5px;
        padding-bottom: 5px;
        color: white;
        border-radius: 4px;
        border: #27ae60 1px solid;
        margin: 10 auto;
        font-weight: 800;
        font-size: 0.8em;
      }
      .btn_off {
        background: lightcoral;
        width: 30%;
        padding-top: 5px;
        padding-bottom: 5px;
        color: white;
        border-radius: 4px;
        border: #27ae60 1px solid;
        margin: 10 auto;
        font-weight: 800;
        font-size: 0.8em;
      }
    </style>
  </head>
  <body>
    <form action="/save" method="get" class="box">
      <h1>Configuration</h1>

      <input type="text" placeholder="My WiFi SSID" name="ssid" required />
      <br />

      <input
        type="password"
        placeholder="WiFi Password"
        name="password"
        required
      />
      <br />

      <input
        type="mqtt_broker"
        placeholder="MQTT broker (empty=disabled)"
        name="mqtt_broker"
      />
      <br />

      <input
        type="mqtt_user"
        placeholder="MQTT user"
        name="mqtt_user"
      />
      <br />

      <input
        type="mqtt_password"
        placeholder="MQTT password"
        name="mqtt_password"
      />
      <br />
      <input
        type="temp_threshold"
        placeholder="Temp. threshold"
        name="temp_threshold"
      />
      <br />

      <br />

      <button type="submit" class="btn">Save</button>
    </form>
    <br />

    <form class="box">
      <h1>Fan Control</h1>
      <button id="turn_on" class="btn_on">On</button><button id="turn_off" class="btn_off">Off</button>
      <br />
      Status: <div id="fan_status"></div>
    </form>
      <br />
    <form class="box">
      Current temp: <div id="temp"></div>Â°C
    </form>
  </body>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script>


  var timeout = setInterval(success, 10000);

  $( document ).ready(function() {
  var data = {};
  $.get( "status", data, success, "json" );
  });

  function success( responseData ) {
      var status = responseData.status;
      var temp = responseData.temp;
      $('#fan_status').text(status);
      $('#temp').text(temp)
    }

    $( function() {
    $('#turn_on').click( function() {
      var data = { state: "on"};
      $.get( "status", data, success, "json" );
    } )});

    $( function() {
    $('#turn_off').click( function() {
      var data = { state: "off"};
      $.get( "status", data, success, "json" );
    } )});
  </script>

</html>
